# מערכת ניהול חנות WooCommerce

מערכת לניהול חנות WooCommerce הכוללת ניהול מוצרים, הזמנות, לקוחות, משלוחים ותשלומים.

## תוכן עניינים
- [התקנה](#התקנה)
- [הגדרות](#הגדרות)
- [פקודות נתמכות](#פקודות-נתמכות)
  - [ניהול משלוחים](#ניהול-משלוחים)
  - [ניהול לקוחות](#ניהול-לקוחות)
  - [ניהול תשלומים](#ניהול-תשלומים)
- [דוגמאות שימוש](#דוגמאות-שימוש)
- [פיתוח](#פיתוח)
- [רישיון](#רישיון)

## התקנה

1. יצירת סביבת פיתוח:
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate     # Windows
```

2. התקנת תלויות:
```bash
pip install -r requirements.txt
```

3. הגדרת קובץ `.env`:
```env
WC_STORE_URL="your-store-url"
WC_CONSUMER_KEY="your-consumer-key"
WC_CONSUMER_SECRET="your-consumer-secret"
WP_USERNAME="your-username"
WP_PASSWORD="your-app-password"
```

## הגדרות

### הגדרות WooCommerce
1. כניסה ללוח הבקרה של WordPress
2. מעבר ל-WooCommerce > הגדרות > מתקדם > REST API
3. יצירת מפתח API חדש עם הרשאות קריאה/כתיבה
4. העתקת מפתחות הצרכן והסוד לקובץ `.env`

### הגדרות חברות שליחויות
המערכת תומכת באינטגרציה עם חברות שליחויות נפוצות בישראל. יש להגדיר את פרטי ההתחברות בקובץ `.env`:

```env
SHIPPING_COMPANY_API_KEY=your-api-key
SHIPPING_COMPANY_SECRET=your-secret
```

## פקודות נתמכות

### ניהול משלוחים

#### אזורי משלוח
```
הוסף אזור משלוח שם: מרכז הארץ, אזורים: תל אביב;רמת גן;גבעתיים, מחיר: 25.90
עדכן אזור משלוח 123 שם: מרכז מורחב, אזורים: תל אביב;רמת גן;גבעתיים;חולון, מחיר: 29.90
```

#### תוויות משלוח
```
הדפס תווית משלוח להזמנה 123 חברת שילוח: חברת שליחויות, שירות: משלוח מהיר
מעקב משלוח להזמנה 123
```

### ניהול לקוחות

#### פרטי לקוח
```
צור לקוח חדש שם: ישראל ישראלי, אימייל: israel@example.com, טלפון: 0501234567
עדכן לקוח 123 שם: ישראל לוי, אימייל: israel.new@example.com, טלפון: 0501234568
```

#### מועדון לקוחות
```
הוסף 100 נקודות ללקוח 123 סיבה: רכישה מעל 1000 ש"ח
הורד 50 נקודות ללקוח 123 סיבה: מימוש הטבה
```

#### הרשאות
```
הוסף הרשאת editor ללקוח 123
הסר הרשאת editor ללקוח 123
```

### ניהול תשלומים

#### שיטות תשלום
```
הוסף שיטת תשלום שם: העברה בנקאית, תיאור: תשלום באמצעות העברה בנקאית, מצב: פעיל
עדכן שיטת תשלום bacs שם: העברה בנקאית חדש, תיאור: תיאור מעודכן, מצב: לא פעיל
```

#### עיבוד תשלומים
```
עבד תשלום להזמנה 123 סכום: 199.90, שיטה: העברה בנקאית
בצע החזר להזמנה 123 סכום: 50, סיבה: פגם במוצר
```

#### היסטוריית עסקאות
```
הצג היסטוריית עסקאות מתאריך: 2024-01-01, עד תאריך: 2024-03-31, סטטוס: completed
```

## דוגמאות שימוש

### ניהול הזמנה מלא
```
# קבלת פרטי הזמנה
הצג הזמנה 123

# עדכון סטטוס משלוח
עדכן משלוח להזמנה 123 מספר מעקב: 1234567890, חברת שילוח: חברת שליחויות

# הדפסת תווית משלוח
הדפס תווית משלוח להזמנה 123 חברת שילוח: חברת שליחויות, שירות: משלוח מהיר

# מעקב אחר משלוח
מעקב משלוח להזמנה 123
```

### ניהול לקוח מלא
```
# יצירת לקוח חדש
צור לקוח חדש שם: ישראל ישראלי, אימייל: israel@example.com, טלפון: 0501234567

# הוספת נקודות מועדון
הוסף 100 נקודות ללקוח 123 סיבה: רכישה מעל 1000 ש"ח

# צפייה בהיסטוריית הזמנות
הצג היסטוריית הזמנות ללקוח 123
```

### ניהול תשלומים מלא
```
# הוספת שיטת תשלום
הוסף שיטת תשלום שם: העברה בנקאית, תיאור: תשלום באמצעות העברה בנקאית, מצב: פעיל

# עיבוד תשלום
עבד תשלום להזמנה 123 סכום: 199.90, שיטה: העברה בנקאית

# ביצוע החזר
בצע החזר להזמנה 123 סכום: 50, סיבה: פגם במוצר
```

## פיתוח

### הערות חשובות
1. **אבטחה**:
   - בסביבת פיתוח: `verify=False` מאופשר
   - בפרודקשן: חובה להשתמש באימות תעודות
   - נתונים רגישים מוגנים באמצעות `SecretStr`

2. **טיפול בנתונים**:
   - לוודא המרה מפורשת של נתונים (str, int)
   - לטפל במקרים של dict כשמצפים למספר
   - להשתמש ב-SecretStr לנתונים רגישים

3. **בדיקות**:
   - הרצת בדיקות: `python -m pytest tests/ -v`
   - בדיקות ספציפיות: `python -m pytest tests/test_file.py::TestClass::test_function -v`

### מבנה הפרויקט
```
src/
├── agents/          # סוכני מערכת
├── core/            # הגדרות וקונפיגורציה
├── resources/       # משאבים
└── utils/           # כלי עזר

tests/               # בדיקות
├── conftest.py     # הגדרות משותפות לבדיקות
└── test_*.py       # קבצי בדיקה
```

## תיעוד API

### ניהול מוצרים
- יצירת מוצר
- עדכון מוצר
- מחיקת מוצר
- ניהול תמונות

### ניהול הזמנות
- יצירת הזמנה
- עדכון סטטוס
- ביטול הזמנה
- החזרות וזיכויים

### ניהול לקוחות
- יצירת לקוח
- עדכון פרטים
- ניהול נקודות
- היסטוריית הזמנות

### ניהול משלוחים
- הגדרת אזורי משלוח
- מחירי משלוח
- מעקב משלוחים
- הדפסת תוויות

### ניהול תשלומים
- עיבוד תשלומים
- החזרים
- היסטוריית עסקאות

## מצב נוכחי
- [X] תשתית בסיסית
- [X] ניהול תצורה
- [X] טיפול בשגיאות בסיסי
- [X] מערכת בדיקות ראשונית
- [ ] מוכנות לפרודקשן

## רישיון

MIT License. ראה קובץ `LICENSE` לפרטים נוספים. 